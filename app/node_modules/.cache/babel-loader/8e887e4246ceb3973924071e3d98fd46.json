{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\batyayur\\\\OneDrive - AMDOCS\\\\Protected Folders\\\\Documents\\\\BattyDocument\\\\work\\\\MoonActiveProject\\\\ui\\\\src\\\\components\\\\promotionTable.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useReducer, useEffect } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { VirtualTableState } from \"@devexpress/dx-react-grid\";\nimport { Grid, VirtualTable, TableHeaderRow } from \"@devexpress/dx-react-grid-material-ui\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VIRTUAL_PAGE_SIZE = 100;\nconst MAX_ROWS = 50000;\nconst URL = \"https://js.devexpress.com/Demos/WidgetsGalleryDataService/api/Sales\";\n\nconst getRowId = row => row.Id;\n\nconst buildQueryString = (skip, take) => `${URL}?skip=${skip}&take=${take}`;\n\nconst initialState = {\n  rows: [],\n  skip: 0,\n  requestedSkip: 0,\n  take: VIRTUAL_PAGE_SIZE * 2,\n  totalCount: 0,\n  loading: false,\n  lastQuery: \"\"\n};\n\nfunction reducer(state, {\n  type,\n  payload\n}) {\n  switch (type) {\n    case \"UPDATE_ROWS\":\n      return { ...state,\n        ...payload,\n        loading: false\n      };\n\n    case \"START_LOADING\":\n      return { ...state,\n        requestedSkip: payload.requestedSkip,\n        take: payload.take\n      };\n\n    case \"REQUEST_ERROR\":\n      return { ...state,\n        loading: false\n      };\n\n    case \"FETCH_INIT\":\n      return { ...state,\n        loading: true\n      };\n\n    case \"UPDATE_QUERY\":\n      return { ...state,\n        lastQuery: payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default function PromotionTable() {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [columns] = useState([{\n    name: \"Id\",\n    title: \"Id\",\n    getCellValue: row => row.Id\n  }, {\n    name: \"ProductCategoryName\",\n    title: \"Category\",\n    getCellValue: row => row.ProductCategoryName\n  }, {\n    name: \"StoreName\",\n    title: \"Store\",\n    getCellValue: row => row.StoreName\n  }, {\n    name: \"ProductName\",\n    title: \"Product\",\n    getCellValue: row => row.ProductName\n  }, {\n    name: \"SalesAmount\",\n    title: \"Amount\",\n    getCellValue: row => row.SalesAmount\n  }]);\n  const [tableColumnExtensions] = useState([{\n    columnName: \"Id\",\n    width: 80\n  }, {\n    columnName: \"ProductCategoryName\",\n    width: 220\n  }, {\n    columnName: \"StoreName\",\n    width: 220\n  }, {\n    columnName: \"SalesAmount\",\n    width: 120\n  }]);\n\n  const getRemoteRows = (requestedSkip, take) => {\n    dispatch({\n      type: \"START_LOADING\",\n      payload: {\n        requestedSkip,\n        take\n      }\n    });\n  };\n\n  const loadData = () => {\n    const {\n      requestedSkip,\n      take,\n      lastQuery,\n      loading\n    } = state;\n    const query = buildQueryString(requestedSkip, take);\n\n    if (query !== lastQuery && !loading) {\n      dispatch({\n        type: \"FETCH_INIT\"\n      });\n      fetch(query).then(response => response.json()).then(({\n        data\n      }) => {\n        dispatch({\n          type: \"UPDATE_ROWS\",\n          payload: {\n            skip: requestedSkip,\n            rows: data,\n            totalCount: MAX_ROWS\n          }\n        });\n      }).catch(() => dispatch({\n        type: \"REQUEST_ERROR\"\n      }));\n      dispatch({\n        type: \"UPDATE_QUERY\",\n        payload: query\n      });\n    }\n  };\n\n  useEffect(() => loadData());\n  const {\n    rows,\n    skip,\n    totalCount,\n    loading\n  } = state;\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      rows: rows,\n      columns: columns,\n      getRowId: getRowId,\n      children: [/*#__PURE__*/_jsxDEV(VirtualTableState, {\n        infiniteScrolling: true,\n        loading: loading,\n        totalRowCount: totalCount,\n        pageSize: VIRTUAL_PAGE_SIZE,\n        skip: skip,\n        getRows: getRemoteRows\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VirtualTable, {\n        columnExtensions: tableColumnExtensions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableHeaderRow, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PromotionTable, \"0ajc9TM8xMklb/sw8lt6b25CL7c=\");\n\n_c = PromotionTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"PromotionTable\");","map":{"version":3,"sources":["C:/Users/batyayur/OneDrive - AMDOCS/Protected Folders/Documents/BattyDocument/work/MoonActiveProject/ui/src/components/promotionTable.tsx"],"names":["React","useState","useReducer","useEffect","Paper","VirtualTableState","Grid","VirtualTable","TableHeaderRow","VIRTUAL_PAGE_SIZE","MAX_ROWS","URL","getRowId","row","Id","buildQueryString","skip","take","initialState","rows","requestedSkip","totalCount","loading","lastQuery","reducer","state","type","payload","PromotionTable","dispatch","columns","name","title","getCellValue","ProductCategoryName","StoreName","ProductName","SalesAmount","tableColumnExtensions","columnName","width","getRemoteRows","loadData","query","fetch","then","response","json","data","catch"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect } from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { VirtualTableState } from \"@devexpress/dx-react-grid\";\r\nimport {\r\n  Grid,\r\n  VirtualTable,\r\n  TableHeaderRow,\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nconst VIRTUAL_PAGE_SIZE = 100;\r\nconst MAX_ROWS = 50000;\r\nconst URL =\r\n  \"https://js.devexpress.com/Demos/WidgetsGalleryDataService/api/Sales\";\r\nconst getRowId = (row: { Id: any }) => row.Id;\r\nconst buildQueryString = (skip: any, take: any) =>\r\n  `${URL}?skip=${skip}&take=${take}`;\r\n\r\nconst initialState = {\r\n  rows: [],\r\n  skip: 0,\r\n  requestedSkip: 0,\r\n  take: VIRTUAL_PAGE_SIZE * 2,\r\n  totalCount: 0,\r\n  loading: false,\r\n  lastQuery: \"\",\r\n};\r\n\r\nfunction reducer(state: any, { type, payload }: any) {\r\n  switch (type) {\r\n    case \"UPDATE_ROWS\":\r\n      return {\r\n        ...state,\r\n        ...payload,\r\n        loading: false,\r\n      };\r\n    case \"START_LOADING\":\r\n      return {\r\n        ...state,\r\n        requestedSkip: payload.requestedSkip,\r\n        take: payload.take,\r\n      };\r\n    case \"REQUEST_ERROR\":\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n      };\r\n    case \"FETCH_INIT\":\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case \"UPDATE_QUERY\":\r\n      return {\r\n        ...state,\r\n        lastQuery: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default function PromotionTable() {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const [columns] = useState([\r\n    { name: \"Id\", title: \"Id\", getCellValue: (row: { Id: any }) => row.Id },\r\n    {\r\n      name: \"ProductCategoryName\",\r\n      title: \"Category\",\r\n      getCellValue: (row: { ProductCategoryName: any }) =>\r\n        row.ProductCategoryName,\r\n    },\r\n    {\r\n      name: \"StoreName\",\r\n      title: \"Store\",\r\n      getCellValue: (row: { StoreName: any }) => row.StoreName,\r\n    },\r\n    {\r\n      name: \"ProductName\",\r\n      title: \"Product\",\r\n      getCellValue: (row: { ProductName: any }) => row.ProductName,\r\n    },\r\n    {\r\n      name: \"SalesAmount\",\r\n      title: \"Amount\",\r\n      getCellValue: (row: { SalesAmount: any }) => row.SalesAmount,\r\n    },\r\n  ]);\r\n  const [tableColumnExtensions] = useState([\r\n    { columnName: \"Id\", width: 80 },\r\n    { columnName: \"ProductCategoryName\", width: 220 },\r\n    { columnName: \"StoreName\", width: 220 },\r\n    { columnName: \"SalesAmount\", width: 120 },\r\n  ]);\r\n\r\n  const getRemoteRows = (requestedSkip: any, take: any) => {\r\n    dispatch({ type: \"START_LOADING\", payload: { requestedSkip, take } });\r\n  };\r\n\r\n  const loadData = () => {\r\n    const { requestedSkip, take, lastQuery, loading } = state;\r\n    const query = buildQueryString(requestedSkip, take);\r\n    if (query !== lastQuery && !loading) {\r\n      dispatch({ type: \"FETCH_INIT\" });\r\n      fetch(query)\r\n        .then((response) => response.json())\r\n        .then(({ data }) => {\r\n          dispatch({\r\n            type: \"UPDATE_ROWS\",\r\n            payload: {\r\n              skip: requestedSkip,\r\n              rows: data,\r\n              totalCount: MAX_ROWS,\r\n            },\r\n          });\r\n        })\r\n        .catch(() => dispatch({ type: \"REQUEST_ERROR\" }));\r\n      dispatch({ type: \"UPDATE_QUERY\", payload: query });\r\n    }\r\n  };\r\n\r\n  useEffect(() => loadData());\r\n\r\n  const { rows, skip, totalCount, loading } = state;\r\n  return (\r\n    <Paper>\r\n      <Grid rows={rows} columns={columns} getRowId={getRowId}>\r\n        <VirtualTableState\r\n          infiniteScrolling\r\n          loading={loading}\r\n          totalRowCount={totalCount}\r\n          pageSize={VIRTUAL_PAGE_SIZE}\r\n          skip={skip}\r\n          getRows={getRemoteRows}\r\n        />\r\n        <VirtualTable columnExtensions={tableColumnExtensions} />\r\n        <TableHeaderRow />\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}