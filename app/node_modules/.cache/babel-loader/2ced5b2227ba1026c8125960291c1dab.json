{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\batyayur\\\\OneDrive - AMDOCS\\\\Protected Folders\\\\Documents\\\\BattyDocument\\\\work\\\\MoonActiveProject\\\\ui\\\\src\\\\components\\\\promotionTable.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useReducer, useEffect } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { DataTypeProvider, SelectionState, VirtualTableState } from \"@devexpress/dx-react-grid\";\nimport { Grid, VirtualTable, TableHeaderRow, TableSelection } from \"@devexpress/dx-react-grid-material-ui\";\nimport axios from \"axios\";\nimport reducer from \"../actions/promotionReducer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VIRTUAL_PAGE_SIZE = 100;\nconst MAX_ROWS = 10000;\nconst URL = \"http://localhost:4000/getAllPromotions\";\n\nconst getRowId = row => row._id;\n\nconst buildQueryString = (skip, take) => `${URL}?skip=${skip}&take=${take}`;\n\nconst initialState = {\n  rows: [],\n  skip: 0,\n  requestedSkip: 0,\n  take: VIRTUAL_PAGE_SIZE * 2,\n  totalCount: 0,\n  loading: false,\n  lastQuery: \"\"\n};\n\nconst DateFormatter = ({\n  value\n}) => value.split(\"T\")[0];\n\n_c = DateFormatter;\n\nconst DateTypeProvider = props => /*#__PURE__*/_jsxDEV(DataTypeProvider, {\n  formatterComponent: DateFormatter,\n  ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 38,\n  columnNumber: 3\n}, this);\n\n_c2 = DateTypeProvider;\nexport default function PromotionTable() {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [selection, setSelection] = useState([]);\n  const columns = [{\n    name: \"promotionName\",\n    title: \"Name\",\n    getCellValue: row => row.promotionName\n  }, {\n    name: \"promotionType\",\n    title: \"Type\",\n    getCellValue: row => row.promotionType\n  }, {\n    name: \"promotionStartDate\",\n    title: \"Start Date\",\n    getCellValue: row => row.promotionStartDate\n  }, {\n    name: \"promotionEndDate\",\n    title: \"End Date\",\n    getCellValue: row => row.promotionEndDate\n  }, {\n    name: \"userGroupName\",\n    title: \"User Group Name\",\n    getCellValue: row => row.userGroupName\n  }, {\n    name: \"Action\",\n    title: \"Action\"\n  }];\n  const [tableColumnExtensions] = useState(tableColumnExtensions);\n  const [dateColumns] = useState([\"promotionStartDate\", \"promotionEndDate\"]);\n\n  const getRemoteRows = (requestedSkip, take) => {\n    dispatch({\n      type: \"START_LOADING\",\n      payload: {\n        requestedSkip,\n        take\n      }\n    });\n  };\n\n  const loadData = () => {\n    const {\n      requestedSkip,\n      take,\n      lastQuery,\n      loading\n    } = state;\n    const query = buildQueryString(requestedSkip, take);\n\n    if (query !== lastQuery && !loading) {\n      dispatch({\n        type: \"FETCH_INIT\"\n      });\n      axios.get(query).then(response => {\n        console.log(response.data.promotions);\n        dispatch({\n          type: \"UPDATE_ROWS\",\n          payload: {\n            skip: requestedSkip,\n            rows: response.data.promotions,\n            totalCount: MAX_ROWS\n          }\n        });\n      }).catch(() => dispatch({\n        type: \"REQUEST_ERROR\"\n      }));\n      dispatch({\n        type: \"UPDATE_QUERY\",\n        payload: query\n      });\n    }\n  };\n\n  useEffect(() => loadData());\n  const {\n    rows,\n    skip,\n    totalCount,\n    loading\n  } = state;\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      rows: rows,\n      columns: columns,\n      getRowId: getRowId,\n      children: [/*#__PURE__*/_jsxDEV(SelectionState, {\n        selection: selection,\n        onSelectionChange: setSelection\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DateTypeProvider, {\n        for: dateColumns\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VirtualTableState, {\n        infiniteScrolling: true,\n        loading: loading,\n        totalRowCount: totalCount,\n        pageSize: VIRTUAL_PAGE_SIZE,\n        skip: skip,\n        getRows: getRemoteRows\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VirtualTable, {\n        columnExtensions: tableColumnExtensions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableSelection, {\n        highlightRow: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableHeaderRow, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PromotionTable, \"JYPPKECx1gC22NgWxO8k8gsHB/I=\");\n\n_c3 = PromotionTable;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"DateFormatter\");\n$RefreshReg$(_c2, \"DateTypeProvider\");\n$RefreshReg$(_c3, \"PromotionTable\");","map":{"version":3,"sources":["C:/Users/batyayur/OneDrive - AMDOCS/Protected Folders/Documents/BattyDocument/work/MoonActiveProject/ui/src/components/promotionTable.tsx"],"names":["React","useState","useReducer","useEffect","Paper","DataTypeProvider","SelectionState","VirtualTableState","Grid","VirtualTable","TableHeaderRow","TableSelection","axios","reducer","VIRTUAL_PAGE_SIZE","MAX_ROWS","URL","getRowId","row","_id","buildQueryString","skip","take","initialState","rows","requestedSkip","totalCount","loading","lastQuery","DateFormatter","value","split","DateTypeProvider","props","PromotionTable","state","dispatch","selection","setSelection","columns","name","title","getCellValue","promotionName","promotionType","promotionStartDate","promotionEndDate","userGroupName","tableColumnExtensions","dateColumns","getRemoteRows","type","payload","loadData","query","get","then","response","console","log","data","promotions","catch"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect } from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  DataTypeProvider,\r\n  SelectionState,\r\n  VirtualTableState,\r\n} from \"@devexpress/dx-react-grid\";\r\nimport {\r\n  Grid,\r\n  VirtualTable,\r\n  TableHeaderRow,\r\n  TableSelection,\r\n  TableEditRow,\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport reducer from \"../actions/promotionReducer\";\r\n\r\nconst VIRTUAL_PAGE_SIZE = 100;\r\nconst MAX_ROWS = 10000;\r\nconst URL = \"http://localhost:4000/getAllPromotions\";\r\nconst getRowId = (row: any) => row._id;\r\nconst buildQueryString = (skip: any, take: any) =>\r\n  `${URL}?skip=${skip}&take=${take}`;\r\n\r\nconst initialState = {\r\n  rows: [],\r\n  skip: 0,\r\n  requestedSkip: 0,\r\n  take: VIRTUAL_PAGE_SIZE * 2,\r\n  totalCount: 0,\r\n  loading: false,\r\n  lastQuery: \"\",\r\n};\r\n\r\nconst DateFormatter = ({ value }: { value: any }) => value.split(\"T\")[0];\r\n\r\nconst DateTypeProvider = (props: any) => (\r\n  <DataTypeProvider formatterComponent={DateFormatter} {...props} />\r\n);\r\n\r\nexport default function PromotionTable() {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const [selection, setSelection] = useState([]);\r\n\r\n  const columns = [\r\n    {\r\n      name: \"promotionName\",\r\n      title: \"Name\",\r\n      getCellValue: (row: any) => row.promotionName,\r\n    },\r\n    {\r\n      name: \"promotionType\",\r\n      title: \"Type\",\r\n      getCellValue: (row: any) => row.promotionType,\r\n    },\r\n    {\r\n      name: \"promotionStartDate\",\r\n      title: \"Start Date\",\r\n      getCellValue: (row: any) => row.promotionStartDate,\r\n    },\r\n    {\r\n      name: \"promotionEndDate\",\r\n      title: \"End Date\",\r\n      getCellValue: (row: any) => row.promotionEndDate,\r\n    },\r\n    {\r\n      name: \"userGroupName\",\r\n      title: \"User Group Name\",\r\n      getCellValue: (row: any) => row.userGroupName,\r\n    },\r\n    { name: \"Action\", title: \"Action\" },\r\n  ];\r\n  const [tableColumnExtensions] = useState(tableColumnExtensions);\r\n  const [dateColumns] = useState([\"promotionStartDate\", \"promotionEndDate\"]);\r\n  const getRemoteRows = (requestedSkip: any, take: any) => {\r\n    dispatch({ type: \"START_LOADING\", payload: { requestedSkip, take } });\r\n  };\r\n\r\n  const loadData = () => {\r\n    const { requestedSkip, take, lastQuery, loading } = state;\r\n    const query = buildQueryString(requestedSkip, take);\r\n    if (query !== lastQuery && !loading) {\r\n      dispatch({ type: \"FETCH_INIT\" });\r\n      axios\r\n        .get(query)\r\n        .then((response) => {\r\n          console.log(response.data.promotions);\r\n          dispatch({\r\n            type: \"UPDATE_ROWS\",\r\n            payload: {\r\n              skip: requestedSkip,\r\n              rows: response.data.promotions,\r\n              totalCount: MAX_ROWS,\r\n            },\r\n          });\r\n        })\r\n        .catch(() => dispatch({ type: \"REQUEST_ERROR\" }));\r\n      dispatch({ type: \"UPDATE_QUERY\", payload: query });\r\n    }\r\n  };\r\n\r\n  useEffect(() => loadData());\r\n  const { rows, skip, totalCount, loading } = state;\r\n  return (\r\n    <Paper>\r\n      <Grid rows={rows} columns={columns} getRowId={getRowId}>\r\n        <SelectionState\r\n          selection={selection}\r\n          onSelectionChange={setSelection}\r\n        />\r\n        <DateTypeProvider for={dateColumns} />\r\n\r\n        <VirtualTableState\r\n          infiniteScrolling\r\n          loading={loading}\r\n          totalRowCount={totalCount}\r\n          pageSize={VIRTUAL_PAGE_SIZE}\r\n          skip={skip}\r\n          getRows={getRemoteRows}\r\n        />\r\n        <VirtualTable columnExtensions={tableColumnExtensions} />\r\n        <TableSelection highlightRow={true} />\r\n\r\n        <TableHeaderRow />\r\n\r\n        {/* <TableEditRow /> */}\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}